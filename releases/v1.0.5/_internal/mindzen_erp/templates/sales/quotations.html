{% extends "base.html" %}

{% block content %}
<!-- Top Navigation -->
<div class="top-nav">
    <div class="breadcrumb">
        <span class="text-gray-500">Sales</span> / Quotations
    </div>
    <div class="user-menu">
        <img src="https://ui-avatars.com/api/?name=Admin" class="w-8 h-8 rounded-full">
    </div>
</div>

<!-- Control Panel -->
<div class="control-panel">
    <div class="buttons">
        <a href="/sales/quotations/new" class="btn-primary inline-block">New</a>
    </div>
    <div class="search-bar">
        <input type="text" placeholder="Search..." class="border rounded px-3 py-1 text-sm w-64">
    </div>
</div>

<!-- List View -->
<div class="p-4">
    <div class="bg-white shadow-sm rounded border">
        <table class="o_list_view">
            <thead>
                <tr>
                    <th class="w-10"><input type="checkbox"></th>
                    <th>Number</th>
                    <th>Date</th>
                    <th>Customer</th>
                    <th>Total</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% if not orders %}
                <tr>
                    <td colspan="6" class="text-center py-8 text-gray-400">
                        No quotations found. Click 'New' to create one.
                    </td>
                </tr>
                {% endif %}

                {% for order in orders %}
                <tr onclick="window.location='/sales/quotations/{{ order.id }}'">
                    <td><input type="checkbox" onclick="event.stopPropagation()"></td>
                    <td class="font-bold text-purple-700">{{ order.name }}</td>
                    <td>{{ order.date_order.strftime('%d/%m/%Y') if order.date_order else '' }}</td>
                    <td>{{ order.customer_name }}</td>
                    <td class="font-bold">${{ order.amount_total }}</td>
                    <td>
                        <span class="badge 
                            {% if order.state == 'sale' %}bg-green-100 text-green-800
                            {% elif order.state == 'cancel' %}bg-gray-100 text-gray-800
                            {% else %}bg-blue-100 text-blue-800{% endif %}">
                            {{ order.state|upper }}
                        </span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}